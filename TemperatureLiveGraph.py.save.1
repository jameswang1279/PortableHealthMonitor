#Need to install pillow

import matplotlib.pyplot as plt
import numpy as np
import serial
#from drawnow import *

temperature = []
arduinoData = serial.Serial('/dev/ttyUSB0', 9600)
plt.ion
cnt = 0

def makeFig():
    plt.xlim(0,100)
    plt.ylim(35,45)
    plt.title("Body Temperature Log")
    plt.grid(True)
    plt.ylabel("Temperature (Celsius) ")
    plt.plot(temperature, ',leabel = 'Degrees Celsius')
    plt.legend(loc = 'upper left')
    plt.show()
while True:
            while(arduinoData.inWaiting() ==0):
                pass
            temp = arduinoData.readline()
            #temp = float(dataArray[0])
	    #temp = arduinoString
            temperature.append(temp)
            #drawnow(makeFig)
            plt.pause(0.0001)
            cnt += 1
            print (cnt)
            if(cnt > 50):
                    temperature.pop()
                    print ("FULL!!!!")
                    print ("Saving images...")
                    makeFig()
                    plt.savefig('image.jpg')		
           # if((np.max(temperature)) > 42):
            #    plt.savefig('image.jpg')
            
